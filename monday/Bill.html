<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
 
  <link rel="stylesheet" href="stylee.css"> <!-- Latest compiled and minified CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Latest compiled JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
   
       
   <!-- ===== Boxicons CSS ===== -->
   <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
     <!--==== Cdn link ====-->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
     <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
     <!-- ===== Title ===== -->
    <title>Website Planet</title>
    <link rel="icon" href="./Image/306921013_180349474498662_2696928526696293829_n.jpg" type="image/x-icon">
</head>
<body>
     <!-- ===== Navbar ===== -->
     <nav>
      <div class="nav-bar">
          <i class='bx bx-menu sidebarOpen' ></i>
          <span class="logo navLogo"><a href="#" id="sss"><span>W</span>ebsitePlanet</a></span>
  
          <div class="menu">
              <div class="logo-toggle">
                  <span class="logo"><a href="#" id="sss"><span>W</span>ebsite planet</a></span>
                  <i class='bx bx-x siderbarClose'></i>
              </div>
  
              <ul class="nav-links">
                  <li><a href="index.html">Home</a></li>
                  <li><a href="#about">About</a></li>
                  <li><a href="Registration.html">Register</a></li>
                  <li><a href="service.html">Services</a></li>
                  <li><a href="contact.html">Contact</a></li>
                  <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                   Login
                    </button>
              </ul>
          </div>
  
          <div class="darkLight-searchBox">
              <div class="dark-light">
                 
              </div>
  
              <div class="searchBox">
                 <div class="searchToggle">
                  <i class='bx bx-x cancel'></i>
                  <i class='bx bx-search search'></i>
                 </div>
  
                  <div class="search-field">
                      <input type="text" placeholder="Search...">
                      <i class='bx bx-search'></i>
                  </div>
              </div>
          </div>
      </div>
  </nav>
  
  
         
    
   <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel">Login here</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form action="/submit-form" method="post" class="was-validated" id="loginForm">
                <label for="username">Username:</label><br>
                <input type="text" id="username" class="form-control" name="username"  pattern="^(?=.*[0-9])(?=.*[a-zA-Z])[a-zA-Z0-9]{3,16}$"  required><br><br>
        
                <label for="password">Password:</label><br>
                <input type="password" id="password" class="form-control" name="password"  pattern="^(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{3,16}$"  required><br><br>
               
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="Submit" value="submit" class="btn btn-primary" onclick="validateLogin()">Submit</button>
                  </div>
            </form>
        </div>
        
      </div>
    </div>
  </div>

<!--- ========= Bill page  ========== -->
<div class="containem">
   
    <form id="billForm" method="post" name="google-sheet">
        <h1>Bill Form</h1>
        <div class="form-group">
            <label for="item">Item</label>
            <input type="text" id="item" name="item">
        </div>
        <div class="form-group">
            <label for="quantity">Quantity</label>
            <input type="number" id="quantity" name="quantity">
        </div>
       
        <div class="form-group">
            <label for="price">Price</label>
            <input type="number" id="price" name="price" step="0.01">
        </div>
        <div class="form-group">
            <label>Location</label>
            <input  type="text" class="location"><br><br>
            <input type="date" class="date" placeholder="Date"><br><br>
            <input type="time" class="time" placeholder="Time">
        </div>
        <button type="submit" class="submit" onclick="addItem()">Add Item</button>
    </form>
    <div id="billDetails">
        <h2>Bill Details</h2>
        <p>Date: <span id="date"></span></p>
        <table id="billTable">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <!-- Items will be added here -->
            </tbody>
        </table>
        <h3>Total: $<span id="grandTotal">0.00</span></h3>
        <button type="button" onclick="downloadPDF()">Download PDF</button>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>





<!--========= footer section ========-->
<section id="footer">
  <footer>
    <p>Copyright&copy; 2024 <a href="#" id="nnn"><span>W</span>ebsitePlanet</a>. All rights reserved.</p>
    <div  class="icco">
        <a href="https://www.instagram.com/umesh.khedekar.796?igsh=MWxraWJjcW1tYmF0bQ=="><i class="fa-brands fa-instagram"></i></a>
        <a href="https://www.facebook.com/umesh.khedekar.796?mibextid=hIlR13"> <i class="fa-brands fa-facebook"></i></a>
       
        <i class="fa-brands fa-twitter"></i>
        <a href="https://wa.me/qr/EODRKGHUTJJVJ1"><i class="fa-brands fa-whatsapp"></i></a>
    </div>


  </footer>

</section>
</body>
<script>
/*------------------*/


const scriptURL = 'https://script.google.com/macros/s/AKfycbxxwTMRFChgELnpB9v4at0YN9ukfIDmQhdB9CIScMeBIgcAsh0PFD7Ft1RBKuo8edaxdQ/exec'
const form = document.forms['google-sheet']

form.addEventListener('submit', e => {
  e.preventDefault()
  fetch(scriptURL, { method: 'POST', body: new FormData(form)})
  alert("Form succefully")

  document.getElementById("billForm").reset();
})


const body = document.querySelector("body"),
      nav = document.querySelector("nav"),
      modeToggle = document.querySelector(".dark-light"),
      searchToggle = document.querySelector(".searchToggle"),
      sidebarOpen = document.querySelector(".sidebarOpen"),
      siderbarClose = document.querySelector(".siderbarClose");

      let getMode = localStorage.getItem("mode");
          if(getMode && getMode === "dark-mode"){
            body.classList.add("dark");
          }

// js code to toggle dark and light mode
      modeToggle.addEventListener("click" , () =>{
        modeToggle.classList.toggle("active");
        body.classList.toggle("dark");

        // js code to keep user selected mode even page refresh or file reopen
        if(!body.classList.contains("dark")){
            localStorage.setItem("mode" , "light-mode");
        }else{
            localStorage.setItem("mode" , "dark-mode");
        }
      });

// js code to toggle search box
        searchToggle.addEventListener("click" , () =>{
        searchToggle.classList.toggle("active");
      });
 
      
//   js code to toggle sidebar
sidebarOpen.addEventListener("click" , () =>{
    nav.classList.add("active");
});

body.addEventListener("click" , e =>{
    let clickedElm = e.target;

    if(!clickedElm.classList.contains("sidebarOpen") && !clickedElm.classList.contains("menu")){
        nav.classList.remove("active");
    }
});


/*-------------------*/

/*--=========== Login =======-- */
function validateLogin() {
  var username = document.getElementById("username").value;
  var password = document.getElementById("password").value;

  // Basic validation (you should use a more secure method in a real application)
  if (username === "umesh8080" && password === "umesh@8080") {
      alert("Login successful!");

      window.location.href = 'Lopen.html';
  } else {
      alert("Invalid username or password. Please try again.");
  }
  document.getElementById("loginForm").reset();
}



/*---======= Bill count ========--*/body

let grandTotal = 0;

// Display the current date and time
function updateDateTime() {
    const now = new Date();
    const dateStr = now.toLocaleDateString() + ' ' + now.toLocaleTimeString();
    document.getElementById('date').textContent = dateStr;
}

function addItem() {
    const item = document.getElementById('item').value;
    const quantity = parseFloat(document.getElementById('quantity').value);
    const price = parseFloat(document.getElementById('price').value);

    if (item && quantity > 0 && price > 0) {
        const total = quantity * price;

        const table = document.getElementById('billTable').getElementsByTagName('tbody')[0];
        const newRow = table.insertRow();

        const cell1 = newRow.insertCell(0);
        const cell2 = newRow.insertCell(1);
        const cell3 = newRow.insertCell(2);
        const cell4 = newRow.insertCell(3);

        cell1.textContent = item;
        cell2.textContent = quantity;
        cell3.textContent = price.toFixed(2);
        cell4.textContent = total.toFixed(2);

        grandTotal += total;
        document.getElementById('grandTotal').textContent = grandTotal.toFixed(2);

        document.getElementById('billForm').reset();
    } else {
        alert('Please enter valid item, quantity, and price.');
    }
}

function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    doc.text("Bill Details", 20, 20);
    doc.text(`Date: ${document.getElementById('date').textContent}`, 20, 30);

    const table = document.getElementById('billTable');
    const rows = table.getElementsByTagName('tbody')[0].rows;

    let y = 40;
    for (let i = 0; i < rows.length; i++) {
        const cells = rows[i].cells;
        doc.text(`Item: ${cells[0].textContent}, Quantity: ${cells[1].textContent}, Price: ${cells[2].textContent}, Total: ${cells[3].textContent}`, 20, y);
        y += 10;
    }

    doc.text(`Grand Total: $${document.getElementById('grandTotal').textContent}`, 20, y + 10);

    doc.save('bill.pdf');
}

// Initialize the date and time display
updateDateTime();
setInterval(updateDateTime, 1000);
</script>
</html>